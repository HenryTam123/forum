(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{79:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(20),a=n.n(c),r=n(23),o=n.n(r),i=n(5),l=n.n(i),u=n(12),j=n(3),b=n(18),d=n.n(b),O=n(35),h=n.n(O),p=n(36),m=n.n(p),x=n(37),f=n.n(x),g=n(19),v=n(0),N=function(e){var t=e.post,n=e.users,s=e.disable;return Object(v.jsxs)("div",{className:"post",children:[Object(v.jsxs)("div",{className:"left",children:[Object(v.jsx)("div",{className:"avatar",children:n?n.map((function(e,n){if(t.creator===e.username)return""===e.icon?Object(v.jsx)(d.a,{}):Object(v.jsx)("img",{src:e.icon},n)})):""}),Object(v.jsx)("p",{className:"post-author",children:t.creator})]}),Object(v.jsxs)("div",{className:"description",children:[s?Object(v.jsx)("div",{className:"upper",children:Object(v.jsx)("h2",{className:"post-name",children:t.title})}):Object(v.jsx)("div",{className:"upper",children:Object(v.jsx)(g.b,{to:"post/".concat(t._id),children:Object(v.jsx)("h2",{className:"post-name",children:t.title})})}),Object(v.jsxs)("div",{className:"lower",children:[Object(v.jsxs)("p",{className:"post-time",children:["posted on ",t.createdAt?t.createdAt.substring(0,10):" "]}),Object(v.jsxs)("div",{className:"group",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"like",children:Object(v.jsx)(h.a,{})}),Object(v.jsx)("p",{className:"like-count",children:t.likeCount})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"dislike",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)("p",{className:"dislike-count",children:t.dislikeCount})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"comment",children:Object(v.jsx)(f.a,{})}),Object(v.jsx)("p",{className:"comment-count",children:t.response?t.response.length:""})]})]})]})]})]})},w=n(38),C=n.n(w),y=n(39),k=n.n(y),S=n(40),I=n.n(S),L=function(e){var t=e.posts,n=e.currentCategory,s=e.handleFormVisible,c=e.currentUser,a=e.users,r=e.isLoggedIn;return Object(v.jsxs)("div",{className:"main-content",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("h2",{children:n}),Object(v.jsxs)("div",{className:"search-field",children:[Object(v.jsx)("input",{placeholder:"search content here"}),Object(v.jsx)("button",{className:"search-btn",children:Object(v.jsx)(C.a,{})})]}),Object(v.jsx)("button",{className:"add-post-btn",onClick:function(){return s(!0)},children:r?Object(v.jsx)(k.a,{}):""}),Object(v.jsx)("button",{className:"bookmark-btn",children:r?Object(v.jsx)(I.a,{}):""})]}),Object(v.jsx)("div",{className:"post-container",children:t.map((function(e,t){return e.category===n?Object(v.jsx)(N,{post:e,currentUser:c,users:a},t):""}))})]})},U=o.a.create({baseURL:"https://tjhkg-forum.herokuapp.com"}),q=(n(79),n(44)),P=n.n(q),R=n(42),A=n.n(R),D=n(41),F=n.n(D),T=n(43),V=n.n(T),E=function(e){var t=e.categories,n=e.changeCategory,s=e.currentCategory,c=e.isLoggedIn,a=e.handleRegister,r=e.handleLogin,o=e.currentUser,i=e.logout;return Object(v.jsxs)("div",{className:"sidebar",children:[Object(v.jsxs)("div",{className:"upper",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("h2",{children:"TJHKG (alpha)"}),Object(v.jsx)("button",{children:Object(v.jsx)(F.a,{})})]}),c?Object(v.jsxs)("div",{className:"personal-info",children:[Object(v.jsx)("div",{className:"avatar",children:o.icon?Object(v.jsx)("img",{src:o.icon}):""}),Object(v.jsxs)("div",{className:"description",children:[Object(v.jsx)("p",{children:o.username}),Object(v.jsxs)("p",{className:"level",children:["Level ",o.level]})]})]}):Object(v.jsxs)("div",{className:"personal-info",children:[Object(v.jsx)("div",{className:"avatar",children:Object(v.jsx)(d.a,{})}),Object(v.jsx)("div",{className:"description",children:Object(v.jsx)("p",{children:"Anonymous"})})]}),c?Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{children:Object(v.jsx)(A.a,{})}),Object(v.jsx)("button",{children:Object(v.jsx)(d.a,{})}),Object(v.jsx)("button",{children:Object(v.jsx)(V.a,{onClick:function(){return i()}})}),Object(v.jsx)("button",{children:Object(v.jsx)(P.a,{})})]}):Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{className:"register-btn",onClick:function(){return a(!0)},children:"Register"}),Object(v.jsx)("button",{className:"register-btn",onClick:function(){return r(!0)},children:"Sign in"})]})]}),Object(v.jsx)("div",{className:"lower",children:t.map((function(e,t){return Object(v.jsxs)("div",{className:"category ".concat(e.category===s?"selected":""),onClick:function(){return n(e.category)},children:[Object(v.jsx)("h2",{children:e.category.charAt(0).toUpperCase()+e.category.slice(1)}),Object(v.jsxs)("p",{className:"post-count",children:[e.posts.length," Posts"]})]},t)}))})]})},J=function(e){var t=e.handleFormVisible,n=e.categories,c=e.currentUser,a=Object(s.useState)(""),r=Object(j.a)(a,2),o=r[0],i=r[1],b=Object(s.useState)("news"),d=Object(j.a)(b,2),O=d[0],h=d[1],p=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={creator:c.username,title:o,category:O},console.log(n),e.next=5,U.post("/posts",{newPost:n},{withCredentials:!0});case 5:e.sent,window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"form-container",children:[Object(v.jsx)("div",{className:"overlay-background",onClick:function(){return t(!1)}}),Object(v.jsxs)("form",{onSubmit:function(e){return p(e)},children:[Object(v.jsx)("h2",{children:"Create new post here"}),Object(v.jsxs)("label",{children:["Title ",Object(v.jsx)("input",{autoComplete:"off",type:"text",name:"title",value:o,required:!0,onChange:function(e){return i(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Category",Object(v.jsx)("select",{required:!0,type:"text",name:"category",value:O,onChange:function(e){return h(e.target.value)},children:n.map((function(e,t){return Object(v.jsx)("option",{value:"".concat(e.category),children:e.category.charAt(0).toUpperCase()+e.category.slice(1)},t)}))})]}),Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){return t(!1)},children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"})]})]})]})},_=n(45),G=n.n(_),Y=function(e){var t=e.handleRegister,n=Object(s.useState)(""),c=Object(j.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),i=Object(j.a)(o,2),l=i[0],u=i[1],b=Object(s.useState)(""),d=Object(j.a)(b,2),O=d[0],h=d[1],p=Object(s.useState)(""),m=Object(j.a)(p,2),x=m[0],f=m[1],g=Object(s.useState)(""),N=Object(j.a)(g,2),w=N[0],C=N[1],y=Object(s.useState)(""),k=Object(j.a)(y,2),S=k[0],I=k[1];return Object(v.jsxs)("div",{className:"form-container",children:[Object(v.jsx)("div",{className:"overlay-background",onClick:function(){return t(!1)}}),Object(v.jsxs)("form",{className:"register-form",onSubmit:function(e){return function(e){if(e.preventDefault(),l!==O)I("Password is different from Confirm Password ");else{var t={username:a,password:l,icon:x};U.post("/register",t).then((function(e){console.log(e.data.success),"true"===e.data.success?window.location.href="/":C(e.data.message)})).catch((function(e){console.log(e)}))}}(e)},children:[Object(v.jsx)("h2",{children:"Create a new account"}),Object(v.jsxs)("label",{children:["Username",Object(v.jsx)("span",{children:""!==w?"(".concat(w,")"):""}),Object(v.jsx)("input",{autoComplete:"off",type:"text",name:"username",value:a,required:!0,onChange:function(e){return r(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Password",Object(v.jsx)("span",{children:""!==S?"(".concat(S,")"):""}),Object(v.jsx)("input",{autoComplete:"off",type:"password",name:"password",value:l,required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Confirm Password ",Object(v.jsx)("input",{autoComplete:"off",type:"password",name:"confirm-password",value:O,required:!0,onChange:function(e){return h(e.target.value)}})]}),Object(v.jsx)("div",{className:"filebase-div",children:Object(v.jsxs)("label",{children:["Choose Your Favourite Icon",Object(v.jsx)(G.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;f(t)}})]})}),Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){return t(!1)},children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"submit-btn",children:"Register"})]})]})]})},B=function(e){var t=e.handleLogin,n=e.login,c=e.err,a=Object(s.useState)(""),r=Object(j.a)(a,2),o=r[0],i=r[1],l=Object(s.useState)(""),u=Object(j.a)(l,2),b=u[0],d=u[1];return Object(v.jsxs)("div",{className:"form-container",children:[Object(v.jsx)("div",{className:"overlay-background",onClick:function(){return t(!1)}}),Object(v.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),n(o,b)},children:[Object(v.jsx)("h2",{children:"Login with your account "}),Object(v.jsxs)("label",{children:["Username ",Object(v.jsx)("span",{className:"warning",children:c}),Object(v.jsx)("input",{autoComplete:"off",type:"text",name:"username",value:o,required:!0,onChange:function(e){return i(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Password ",Object(v.jsx)("input",{autoComplete:"off",type:"password",name:"password",value:b,required:!0,onChange:function(e){return d(e.target.value)}})]}),Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){return t(!1)},children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"submit-btn",children:"Login"})]})]})]})},H=n(46),K=n.n(H),z=n(47),M=n.n(z),Q=n(4),W=function(e){var t=e.users,n=e.currentUser,c=e.isLoggedIn,a=e.responses,r=Object(Q.f)().id,o=Object(s.useState)([]),i=Object(j.a)(o,2),b=i[0],O=i[1],h=Object(s.useState)(""),p=Object(j.a)(h,2),m=p[0],x=p[1];Object(s.useEffect)((function(){f()}),[]);var f=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),t={id:r},e.next=4,U.post("/posts/post",{user:t},{withCredentials:!0});case 4:n=e.sent,O(n.data[0]),console.log(b);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={creator:n.username,responseContent:m,id:b._id},e.next=3,U.post("/posts/response",{response:t},{withCredentials:!0});case 3:s=e.sent,O(s.data[0]),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"post-detail",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("button",{className:"return-btn",children:Object(v.jsx)(g.b,{to:"/",children:Object(v.jsx)(K.a,{})})}),b?Object(v.jsx)(N,{post:b,users:t,disable:!0}):""]}),Object(v.jsx)("div",{className:"body",children:b.response?a.map((function(e,s){for(var c=0;c<b.response.length;c++)if(e._id===b.response[c])return Object(v.jsxs)("div",{className:"container ".concat(e.creator===n.username?"self":""),children:[Object(v.jsx)("div",{className:"avatar",children:t?t.map((function(t,n){if(e.creator===t.username)return""===t.icon?Object(v.jsx)(d.a,{}):Object(v.jsx)("img",{src:t.icon},n)})):""}),Object(v.jsx)("div",{className:"response",children:e.responseContent})]},s)})):""}),c?Object(v.jsxs)("div",{className:"reply-box",children:[Object(v.jsx)("h2",{}),Object(v.jsx)("div",{className:"avatar",children:n&&""!==n.icon?Object(v.jsx)("img",{src:n.icon}):Object(v.jsx)(d.a,{})}),Object(v.jsx)("button",{className:"reply-button"}),Object(v.jsx)("input",{placeholder:"Your quick reply here",value:m,onChange:function(e){return x(e.target.value)},className:"input",type:"text"}),Object(v.jsx)("button",{className:"send",onClick:function(){return w()},children:Object(v.jsx)(M.a,{})})]}):""]})},X=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),r=Object(j.a)(a,2),o=r[0],i=r[1],b=Object(s.useState)([]),d=Object(j.a)(b,2),O=d[0],h=d[1],p=Object(s.useState)("Gaming"),m=Object(j.a)(p,2),x=m[0],f=m[1],N=Object(s.useState)([]),w=Object(j.a)(N,2),C=w[0],y=w[1],k=Object(s.useState)([]),S=Object(j.a)(k,2),I=S[0],q=S[1],P=Object(s.useState)(!1),R=Object(j.a)(P,2),A=R[0],D=R[1],F=Object(s.useState)(!1),T=Object(j.a)(F,2),V=T[0],_=T[1],G=Object(s.useState)(!1),H=Object(j.a)(G,2),K=H[0],z=H[1],M=Object(s.useState)(!1),X=Object(j.a)(M,2),Z=X[0],$=X[1],ee=Object(s.useState)(""),te=Object(j.a)(ee,2),ne=te[0],se=te[1],ce=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/users",{withCredentials:!0});case 2:t=e.sent,console.log(t.data),q(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("username")&&localStorage.getItem("password")&&!Z&&je(localStorage.getItem("username"),localStorage.getItem("password")),ae(),oe(),ce(),re();case 5:case"end":return e.stop()}}),e)}))),[]);var ae=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/posts");case 2:t=e.sent,n=t.data,c(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/posts/response");case 2:t=e.sent,n=t.data,console.log(n),i(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/categories");case 2:t=e.sent,n=t.data,h(n),console.log(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){D(e)},le=function(e){_(e)},ue=function(e){z(e)},je=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={username:t,password:n},U.post("/login",s,{withCredentials:!0}).then((function(e){console.log(e.data),e.data.username?(localStorage.getItem("username")||localStorage.getItem("password")||Z||(localStorage.setItem("username",t),localStorage.setItem("password",n)),y(e.data),$(!0),ue(!1)):se(e.data.message)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"body",children:Object(v.jsxs)("div",{className:"main-container",children:[K?Object(v.jsx)(B,{handleLogin:ue,login:je,err:ne}):"",V?Object(v.jsx)(Y,{handleRegister:le}):"",A?Object(v.jsx)(J,{handleFormVisible:ie,categories:O,currentUser:C}):"",Object(v.jsxs)(g.a,{children:[Object(v.jsx)(E,{posts:n,categories:O,changeCategory:function(e){f(e)},currentCategory:x,isLoggedIn:Z,handleRegister:le,handleLogin:ue,currentUser:C,logout:function(){$(!1),console.log("logout"),console.log(document.cookie),document.cookie="sessionID=; expires= Thu, 21 Aug 2014 20:00:00 UTC",localStorage.clear(),U.delete("http://localhost:5000/logout",{withCredentials:!0}).then((function(e){console.log(e),console.log("logout")})).catch((function(e){console.log(e)}))}}),Object(v.jsxs)(Q.c,{children:[Object(v.jsx)(Q.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(L,{posts:n,currentCategory:x,handleFormVisible:ie,users:I,isLoggedIn:Z})}}),Object(v.jsx)(Q.a,{path:"/post/:id",render:function(){return Object(v.jsx)(W,{users:I,currentUser:C,isLoggedIn:Z,responses:o})}})]})]})]})})};a.a.render(Object(v.jsx)(X,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.c0905fc3.chunk.js.map