(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{79:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(20),a=n.n(c),r=n(23),o=n.n(r),i=n(4),l=n.n(i),u=n(7),j=n(3),d=n(18),b=n.n(d),h=n(35),p=n.n(h),O=n(36),m=n.n(O),x=n(37),f=n.n(x),g=n(19),v=n(0),N=function(e){var t=e.post,n=e.users,s=e.disable,c=e.handleLike,a=e.handleDislike;return Object(v.jsxs)("div",{className:"post",children:[Object(v.jsxs)("div",{className:"left",children:[Object(v.jsx)("div",{className:"avatar",children:n?n.map((function(e,n){if(t.creator===e.username)return""===e.icon?Object(v.jsx)(b.a,{}):Object(v.jsx)("img",{src:e.icon},n)})):""}),Object(v.jsx)("p",{className:"post-author",children:t.creator})]}),Object(v.jsxs)("div",{className:"description",children:[s?Object(v.jsx)("div",{className:"upper",children:Object(v.jsx)("h2",{className:"post-name",children:t.title})}):Object(v.jsx)("div",{className:"upper",children:Object(v.jsx)(g.b,{to:"post/".concat(t._id),children:Object(v.jsx)("h2",{className:"post-name",children:t.title})})}),Object(v.jsxs)("div",{className:"lower",children:[Object(v.jsxs)("p",{className:"post-time",children:["posted on ",t.createdAt?t.createdAt.substring(0,10):" "]}),Object(v.jsxs)("div",{className:"group",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"like",onClick:function(){return c(t._id)},children:Object(v.jsx)(p.a,{})}),Object(v.jsx)("p",{className:"like-count",children:t.likeCount?t.likeCount.length:""})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"dislike",onClick:function(){return a(t._id)},children:Object(v.jsx)(m.a,{})}),Object(v.jsx)("p",{className:"dislike-count",children:t.dislikeCount?t.dislikeCount.length:""})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"comment",children:Object(v.jsx)(f.a,{})}),Object(v.jsx)("p",{className:"comment-count",children:t.response?t.response.length:""})]})]})]})]})]})},w=n(38),k=n.n(w),C=n(39),y=n.n(C),S=n(40),L=n.n(S),I=function(e){var t=e.posts,n=e.currentCategory,c=e.handleFormVisible,a=e.currentUser,r=e.users,o=e.isLoggedIn,i=e.handleLike,l=e.handleDislike,u=Object(s.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1];return Object(v.jsxs)("div",{className:"main-content",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("h2",{children:n}),Object(v.jsxs)("div",{className:"search-field",children:[Object(v.jsx)("input",{placeholder:"search content here",value:b,onChange:function(e){return h(e.target.value)}}),Object(v.jsx)("button",{className:"search-btn",children:Object(v.jsx)(k.a,{})})]}),Object(v.jsx)("button",{className:"add-post-btn",onClick:function(){return c(!0)},children:o?Object(v.jsx)(y.a,{}):""}),Object(v.jsx)("button",{className:"bookmark-btn",children:o?Object(v.jsx)(L.a,{}):""})]}),Object(v.jsx)("div",{className:"post-container",children:t.map((function(e,t){return e.category===n&&e.title.toLowerCase().includes(b.toLowerCase())?Object(v.jsx)(N,{post:e,currentUser:a,users:r,handleLike:i,handleDislike:l},t):""}))})]})},U=o.a.create({baseURL:"https://tjhkg-forum.herokuapp.com"}),D=(n(79),n(44)),q=n.n(D),P=n(42),R=n.n(P),A=n(41),F=n.n(A),_=n(43),T=n.n(_),V=function(e){var t=e.categories,n=e.changeCategory,s=e.currentCategory,c=e.isLoggedIn,a=e.handleRegister,r=e.handleLogin,o=e.currentUser,i=e.logout;return Object(v.jsxs)("div",{className:"sidebar",children:[Object(v.jsxs)("div",{className:"upper",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("h2",{children:"TJHKG (alpha)"}),Object(v.jsx)("button",{children:Object(v.jsx)(F.a,{})})]}),c?Object(v.jsxs)("div",{className:"personal-info",children:[Object(v.jsx)("div",{className:"avatar",children:o.icon?Object(v.jsx)("img",{src:o.icon}):""}),Object(v.jsxs)("div",{className:"description",children:[Object(v.jsx)("p",{children:o.username}),Object(v.jsxs)("p",{className:"level",children:["Level ",o.level]})]})]}):Object(v.jsxs)("div",{className:"personal-info",children:[Object(v.jsx)("div",{className:"avatar",children:Object(v.jsx)(b.a,{})}),Object(v.jsx)("div",{className:"description",children:Object(v.jsx)("p",{children:"Anonymous"})})]}),c?Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{children:Object(v.jsx)(R.a,{})}),Object(v.jsx)("button",{children:Object(v.jsx)(b.a,{})}),Object(v.jsx)("button",{children:Object(v.jsx)(T.a,{onClick:function(){return i()}})}),Object(v.jsx)("button",{children:Object(v.jsx)(q.a,{})})]}):Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{className:"register-btn",onClick:function(){return a(!0)},children:"Register"}),Object(v.jsx)("button",{className:"register-btn",onClick:function(){return r(!0)},children:"Sign in"})]})]}),Object(v.jsx)("div",{className:"lower",children:t.map((function(e,t){return Object(v.jsxs)("div",{className:"category ".concat(e.category===s?"selected":""),onClick:function(){return n(e.category)},children:[Object(v.jsx)("h2",{children:e.category.charAt(0).toUpperCase()+e.category.slice(1)}),Object(v.jsxs)("p",{className:"post-count",children:[e.posts.length," Posts"]})]},t)}))})]})},E=function(e){var t=e.handleFormVisible,n=e.categories,c=e.currentUser,a=Object(s.useState)(""),r=Object(j.a)(a,2),o=r[0],i=r[1],d=Object(s.useState)("news"),b=Object(j.a)(d,2),h=b[0],p=b[1],O=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={creator:c.username,title:o,category:h},console.log(n),e.next=5,U.post("/posts",{newPost:n},{withCredentials:!0});case 5:e.sent,window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"form-container",children:[Object(v.jsx)("div",{className:"overlay-background",onClick:function(){return t(!1)}}),Object(v.jsxs)("form",{onSubmit:function(e){return O(e)},children:[Object(v.jsx)("h2",{children:"Create new post here"}),Object(v.jsxs)("label",{children:["Title ",Object(v.jsx)("input",{autoComplete:"off",type:"text",name:"title",value:o,required:!0,onChange:function(e){return i(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Category",Object(v.jsx)("select",{required:!0,type:"text",name:"category",value:h,onChange:function(e){return p(e.target.value)},children:n.map((function(e,t){return Object(v.jsx)("option",{value:"".concat(e.category),children:e.category.charAt(0).toUpperCase()+e.category.slice(1)},t)}))})]}),Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){return t(!1)},children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"})]})]})]})},J=n(45),G=n.n(J),Y=function(e){var t=e.handleRegister,n=Object(s.useState)(""),c=Object(j.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),i=Object(j.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(""),b=Object(j.a)(d,2),h=b[0],p=b[1],O=Object(s.useState)(""),m=Object(j.a)(O,2),x=m[0],f=m[1],g=Object(s.useState)(""),N=Object(j.a)(g,2),w=N[0],k=N[1],C=Object(s.useState)(""),y=Object(j.a)(C,2),S=y[0],L=y[1];return Object(v.jsxs)("div",{className:"form-container",children:[Object(v.jsx)("div",{className:"overlay-background",onClick:function(){return t(!1)}}),Object(v.jsxs)("form",{className:"register-form",onSubmit:function(e){return function(e){if(e.preventDefault(),l!==h)L("Password is different from Confirm Password ");else{var t={username:a,password:l,icon:x};U.post("/register",t).then((function(e){console.log(e.data.success),"true"===e.data.success?window.location.href="/":k(e.data.message)})).catch((function(e){console.log(e)}))}}(e)},children:[Object(v.jsx)("h2",{children:"Create a new account"}),Object(v.jsxs)("label",{children:["Username",Object(v.jsx)("span",{children:""!==w?"(".concat(w,")"):""}),Object(v.jsx)("input",{autoComplete:"off",type:"text",name:"username",value:a,required:!0,onChange:function(e){return r(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Password",Object(v.jsx)("span",{children:""!==S?"(".concat(S,")"):""}),Object(v.jsx)("input",{autoComplete:"off",type:"password",name:"password",value:l,required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Confirm Password ",Object(v.jsx)("input",{autoComplete:"off",type:"password",name:"confirm-password",value:h,required:!0,onChange:function(e){return p(e.target.value)}})]}),Object(v.jsx)("div",{className:"filebase-div",children:Object(v.jsxs)("label",{children:["Choose Your Favourite Icon",Object(v.jsx)(G.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;f(t)}})]})}),Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){return t(!1)},children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"submit-btn",children:"Register"})]})]})]})},B=function(e){var t=e.handleLogin,n=e.login,c=e.err,a=Object(s.useState)(""),r=Object(j.a)(a,2),o=r[0],i=r[1],l=Object(s.useState)(""),u=Object(j.a)(l,2),d=u[0],b=u[1];return Object(v.jsxs)("div",{className:"form-container",children:[Object(v.jsx)("div",{className:"overlay-background",onClick:function(){return t(!1)}}),Object(v.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),n(o,d)},children:[Object(v.jsx)("h2",{children:"Login with your account "}),Object(v.jsxs)("label",{children:["Username ",Object(v.jsx)("span",{className:"warning",children:c}),Object(v.jsx)("input",{autoComplete:"off",type:"text",name:"username",value:o,required:!0,onChange:function(e){return i(e.target.value)}})]}),Object(v.jsxs)("label",{children:["Password ",Object(v.jsx)("input",{autoComplete:"off",type:"password",name:"password",value:d,required:!0,onChange:function(e){return b(e.target.value)}})]}),Object(v.jsxs)("div",{className:"button-group",children:[Object(v.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){return t(!1)},children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"submit-btn",children:"Login"})]})]})]})},H=n(46),K=n.n(H),z=n(47),M=n.n(z),Q=n(5),W=function(e){var t=e.users,n=e.currentUser,c=e.isLoggedIn,a=Object(Q.f)().id,r=Object(s.useState)([]),o=Object(j.a)(r,2),i=o[0],d=o[1],h=Object(s.useState)([]),p=Object(j.a)(h,2),O=p[0],m=p[1],x=Object(s.useState)(""),f=Object(j.a)(x,2),w=f[0],k=f[1],C=Object(s.useState)(!1),y=Object(j.a)(C,2),S=y[0],L=y[1];Object(s.useEffect)((function(){I(),D()}),[S]);var I=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),t={id:a},e.next=4,U.post("/posts/post",{user:t},{withCredentials:!0});case 4:n=e.sent,d(n.data[0]),console.log(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/posts/response");case 2:t=e.sent,n=t.data,console.log(n),m(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={creator:n.username,responseContent:w,id:i._id},e.next=3,U.post("/posts/response",{response:t},{withCredentials:!0});case 3:s=e.sent,d(s.data[0]),k(""),L(!S);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={username:n.username,id:t},e.prev=1,e.next=4,U.patch("/posts/like",{data:s},{withCredentials:!0});case 4:c=e.sent,console.log(c.data),L(!S),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(l.a.mark((function e(t){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={username:n.username,id:t},e.prev=1,e.next=4,U.patch("/posts/dislike",{data:s},{withCredentials:!0});case 4:c=e.sent,console.log(c.data),L(!S),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"post-detail",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("button",{className:"return-btn",children:Object(v.jsx)(g.b,{to:"/",children:Object(v.jsx)(K.a,{})})}),i?Object(v.jsx)(N,{post:i,users:t,disable:!0,handleLike:P,handleDislike:R}):""]}),Object(v.jsx)("div",{className:"body",children:i.response?O.map((function(e,s){for(var c=0;c<i.response.length;c++)if(e._id===i.response[c])return Object(v.jsxs)("div",{className:"container ".concat(e.creator===n.username?"self":""),children:[Object(v.jsx)("div",{className:"avatar",children:t?t.map((function(t,n){if(e.creator===t.username)return""===t.icon?Object(v.jsx)(b.a,{}):Object(v.jsx)("img",{src:t.icon},n)})):""}),Object(v.jsx)("div",{className:"response",children:e.responseContent})]},s)})):""}),c?Object(v.jsxs)("div",{className:"reply-box",children:[Object(v.jsx)("h2",{}),Object(v.jsx)("div",{className:"avatar",children:n&&""!==n.icon?Object(v.jsx)("img",{src:n.icon}):Object(v.jsx)(b.a,{})}),Object(v.jsx)("button",{className:"reply-button"}),Object(v.jsx)("input",{placeholder:"Your quick reply here",value:w,onChange:function(e){return k(e.target.value)},className:"input",type:"text"}),Object(v.jsx)("button",{className:"send",onClick:function(){return q()},children:Object(v.jsx)(M.a,{})})]}):""]})},X=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),r=Object(j.a)(a,2),o=r[0],i=r[1],d=Object(s.useState)("Gaming"),b=Object(j.a)(d,2),h=b[0],p=b[1],O=Object(s.useState)([]),m=Object(j.a)(O,2),x=m[0],f=m[1],N=Object(s.useState)([]),w=Object(j.a)(N,2),k=w[0],C=w[1],y=Object(s.useState)(!1),S=Object(j.a)(y,2),L=S[0],D=S[1],q=Object(s.useState)(!1),P=Object(j.a)(q,2),R=P[0],A=P[1],F=Object(s.useState)(!1),_=Object(j.a)(F,2),T=_[0],J=_[1],G=Object(s.useState)(!1),H=Object(j.a)(G,2),K=H[0],z=H[1],M=Object(s.useState)(!1),X=Object(j.a)(M,2),Z=X[0],$=X[1],ee=Object(s.useState)(""),te=Object(j.a)(ee,2),ne=te[0],se=te[1],ce=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/users",{withCredentials:!0});case 2:t=e.sent,console.log(t.data),C(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("username")&&localStorage.getItem("password")&&!K&&ue(localStorage.getItem("username"),localStorage.getItem("password")),ae(),re(),ce();case 4:case"end":return e.stop()}}),e)}))),[Z]);var ae=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/posts");case 2:t=e.sent,n=t.data,c(n),console.log(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/categories");case 2:t=e.sent,n=t.data,i(n),console.log(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(e){D(e)},ie=function(e){A(e)},le=function(e){J(e)},ue=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={username:t,password:n},U.post("/login",s,{withCredentials:!0}).then((function(e){console.log(e.data),e.data.username?(localStorage.getItem("username")||localStorage.getItem("password")||K||(localStorage.setItem("username",t),localStorage.setItem("password",n)),f(e.data),z(!0),le(!1)):se(e.data.message)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:x.username,id:t},e.prev=1,e.next=4,U.patch("/posts/like",{data:n},{withCredentials:!0});case 4:s=e.sent,console.log(s.data),$(!Z),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:x.username,id:t},e.prev=1,e.next=4,U.patch("/posts/dislike",{data:n},{withCredentials:!0});case 4:s=e.sent,console.log(s.data),$(!Z),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"body",children:Object(v.jsxs)("div",{className:"main-container",children:[T?Object(v.jsx)(B,{handleLogin:le,login:ue,err:ne}):"",R?Object(v.jsx)(Y,{handleRegister:ie}):"",L?Object(v.jsx)(E,{handleFormVisible:oe,categories:o,currentUser:x}):"",Object(v.jsxs)(g.a,{basename:"/forum",children:[Object(v.jsx)(V,{posts:n,categories:o,changeCategory:function(e){p(e)},currentCategory:h,isLoggedIn:K,handleRegister:ie,handleLogin:le,currentUser:x,logout:function(){z(!1),console.log("logout"),console.log(document.cookie),document.cookie="sessionID=; expires= Thu, 21 Aug 2014 20:00:00 UTC",localStorage.clear(),U.delete("http://localhost:5000/logout",{withCredentials:!0}).then((function(e){console.log(e),console.log("logout")})).catch((function(e){console.log(e)}))}}),Object(v.jsxs)(Q.c,{children:[Object(v.jsx)(Q.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(I,{posts:n,currentCategory:h,handleFormVisible:oe,users:k,isLoggedIn:K,handleLike:je,handleDislike:de})}}),Object(v.jsx)(Q.a,{path:"/post/:id",render:function(){return Object(v.jsx)(W,{users:k,currentUser:x,isLoggedIn:K})}})]})]})]})})};a.a.render(Object(v.jsx)(X,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.14ebcc53.chunk.js.map